(this.webpackJsonpgloben=this.webpackJsonpgloben||[]).push([[0],{36:function(e,t,n){},38:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(26),i=n.n(r),s=(n(36),n(6)),o=n(10),l=(n(38),n(4)),j=n(16),u=n(30),m=n(32),d=n(31),b=n(14),h=n(2),f={uniforms:{colorA:{type:"vec3",value:new h.Color(16711680)},colorB:{type:"vec3",value:new h.Color(255)},displacementA:{value:1}},vertexShader:"\n    varying vec3 vUv; \n    uniform float displacementA; \n\n    void main() {\n      vUv = position; \n      vec3 posA;\n      vec3 np2;\n      np2 = normalize(position) * 2.0;\n      posA = (position - np2) * displacementA + np2;\n      vec4 modelViewPosition = modelViewMatrix * vec4(posA.x, posA.y, posA.z, 1.0);\n      gl_Position = projectionMatrix * modelViewPosition; \n    }\n  ",fragmentShader:"\n    uniform vec3 colorA; \n    uniform vec3 colorB; \n    varying vec3 vUv;\n\n    void main() {\n        gl_FragColor = vec4(mix(colorA, colorB, vUv.z), 1.0);\n    }\n  "},O=n(3);Object(j.b)({OrbitControls:u.a,EffectComposer:m.a,RenderPass:d.a,ShaderPass:b.a});var x=Object(o.range)(80,-81,-1),p=Object(o.range)(180,-181,-1);function v(e){var t=e.animate,n=e.setDisplacement,c=e.displacement,r=e.populationIndex,i=Object(a.useRef)(),l=Object(a.useState)(.01),u=Object(s.a)(l,2),m=u[0],d=u[1];Object(j.c)((function(){i.current.rotation.y+=.001,t&&(c>=5?d(-.01):c<=0&&d(.01),n(c+m))}));var b=Object(a.useMemo)((function(){return new Float32Array(x.flatMap((function(e){var t=p.map((function(t){return function(e,t,n){var a=(90-e)*(Math.PI/180),c=(180-t)*(Math.PI/180);return[n*Math.sin(a)*Math.cos(c),n*Math.cos(a),n*Math.sin(a)*Math.sin(c)]}(e,t,2+1*(r[[e,t]]||0))})),n=Object(o.range)(t.length-1).flatMap((function(e){return[t[e],t[e+1]]}));return Object(o.flatten)(n)})))}),[r.length]);Object(a.useEffect)((function(){var e=i.current;e.material.uniformsNeedUpdate=!0,e.material.uniforms.displacementA.value=c}),[i,b,c]);var h=f.uniforms,v=f.fragmentShader,g=f.vertexShader,y=Object(a.useMemo)((function(){return Object(O.jsx)("bufferGeometry",{attach:"geometry",children:Object(O.jsx)("bufferAttribute",{attachObject:["attributes","position"],count:b.length/3,array:b,itemSize:3})})}),[]);return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("lineSegments",{ref:i,children:[y,Object(O.jsx)("shaderMaterial",{attach:"material",uniforms:h,fragmentShader:v,vertexShader:g})]})})}var g=c.a.createContext();function y(e){var t=e.children,n=Object(j.d)(),c=n.gl,r=n.camera,i=n.invalidate,s=Object(a.useState)(!0),o=Object(a.useRef)();return Object(a.useEffect)((function(){var e=o.current,t=e.addEventListener("change",i);return function(){return e.removeEventListener("change",t)}}),[i]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("orbitControls",{ref:o,args:[r,c.domElement],enableDamping:!0,enabled:s[0]}),Object(O.jsx)(g.Provider,{value:s,children:t})]})}var S=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),o=Object(s.a)(i,2),u=o[0],m=(o[1],Object(a.useMemo)((function(){return Object(O.jsx)(v,Object(l.a)({},e))}),[e.displacement,e.populationIndex]));return Object(O.jsxs)(j.a,{raycaster:{params:{Line:{threshold:5}}},children:[Object(O.jsx)("color",{attach:"background",args:["lightblue"]}),Object(O.jsx)("ambientLight",{}),Object(O.jsx)("pointLight",{position:[10,10,10]}),Object(O.jsxs)(y,{children:[m,Object(O.jsxs)("mesh",{position:[0,0,0],scale:u?[1,1,1]:[2,2,2],onPointerOver:function(e){return r(!0)},onPointerOut:function(e){return r(!1)},children:[Object(O.jsx)("sphereBufferGeometry",{args:[1,12,12]}),Object(O.jsx)("meshStandardMaterial",{color:c?"hotpink":"orange"})]})]})]})};var w=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(2.5),i=Object(s.a)(r,2),l=i[0],j=i[1],u=Object(a.useState)(!0),m=Object(s.a)(u,2),d=m[0],b=m[1];Object(a.useEffect)((function(){window.fetch("./data/population909500.json").then((function(e){return e.json()})).then((function(e){var t=Object(s.a)(e,3),n=(t[0],t[1],Object(s.a)(t[2],2)),a=(n[0],n[1]);c(a)}))}),[]);var h=Object(o.fromPairs)(Object(o.chunk)(n,3).map((function(e){var t=Object(s.a)(e,3);return[[t[0],t[1]],t[2]]})));return n?Object(O.jsxs)("div",{className:"bg-gray-100 h-screen flex flex-col",children:[Object(O.jsx)("header",{className:"bg-white shadow",children:Object(O.jsx)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:Object(O.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Globen"})})}),Object(O.jsxs)("main",{className:"relative h-full flex-1",children:[Object(O.jsx)(S,{animate:d,setDisplacement:j,displacement:l,populationIndex:h}),Object(O.jsx)("div",{className:"absolute top-4 left-4 shadow sm:rounded-md sm:overflow-hidden",children:Object(O.jsxs)("div",{className:"px-4 py-5 bg-white space-y-6 sm:p-6",children:[Object(O.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Displacement"}),Object(O.jsx)("div",{className:"mt-1 flex rounded-md shadow-sm",children:Object(O.jsx)("input",{type:"range",min:"0",max:"5",value:l,step:"0.01",onChange:function(e){return j(parseFloat(e.target.value))}})}),Object(O.jsxs)("div",{className:"flex items-start",children:[Object(O.jsx)("div",{className:"flex items-center h-5",children:Object(O.jsx)("input",{id:"animate",name:"animate",type:"checkbox",checked:d,className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded",onChange:function(e){console.log(e.target.checked),b(e.target.checked)}})}),Object(O.jsxs)("div",{className:"ml-3 text-sm",children:[Object(O.jsx)("label",{htmlFor:"animate",className:"font-medium text-gray-700",children:"Animate"}),Object(O.jsx)("p",{className:"text-gray-500",children:"Animate the displacement"})]})]})]})})]})]}):"Loading..."},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(w,{})}),document.getElementById("root")),M()}},[[43,1,2]]]);
//# sourceMappingURL=main.963e81da.chunk.js.map